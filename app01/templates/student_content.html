{% extends 'layout.html' %}
{% load i18n %}

{% block content %}
    <div class="container">
        <div class="page-header">
            <h1>
                <span class="glyphicon glyphicon-education" aria-hidden="true"></span>
                {% trans '学生信息展示' %} <small>{% trans '在这里你看到已经添加的学生信息，目前已报到' %}{{ students.count }}人</small></h1>
        </div>
        <div>
            <div class="col-lg-6 row">
                <a href="#" class=" btn btn-success btn-xl " id="btnAdd" role="button">
                    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    {% trans '添加学生信息' %}</a>
            </div>
            <div class="col-lg-6 row" style=" margin-bottom: 20px;float: right">
                <form method="get">
                    <div class="input-group">
                        <input type="text" class="form-control" name="Q" placeholder="{% trans '请 输 入 学 号' %}">
                        <span class="input-group-btn">
                        <button class="btn btn-default" type="submit" style="height: 34px">
                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                        </button>
                    </span>
                    </div><!-- /input-group -->
                </form>
            </div>
        </div>
        <table class="table table-bordered table-hover">
            <thead>
            <tr>
                <th>ID</th>
                <th>{% trans '姓名' %}</th>
                <th>{% trans '性别' %}</th>
                <th>{% trans '学号' %}</th>
                <th>{% trans '班主任' %}</th>
                <th>{% trans '删除|编辑' %}</th>
            </tr>
            </thead>
            <tbody>
            {% for items in page_obj %}
                <tr>
                    <th>{{ items.id }}</th>
                    <td>{{ items.name }}</td>
                    <td>{{ items.get_gender_display }}</td>
                    <td>{{ items.number }}</td>
                    <td>{{ items.teacher }}</td>
                    <td>
                        <a class="btn btn-danger btn-xs" id="delBtn" href="/index/{{ items.id }}/studentdel/"
                           onclick="show_alert()">
                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                        </a> |
                        <a class="btn btn-primary btn-xs" id="delBtn" href="/index/{{ items.id }}/studentedit/">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                        </a>
                    </td>
                </tr>

            {% endfor %}


            </tbody>
        </table>

        {#        以下为分页组件#}
        <div class="text-center">
            <ul class="pagination">
                <!-- 首页链接-->
                {% if page_obj.has_previous %}
                    <li>
                        <a href="?page=1" aria-label="First">&laquo;</a>
                    </li>
                    <li>
                        <a href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">&lsaquo;</a>
                    </li>
                {% endif %}
                <li class="active">
                    <span>{% trans '当前第' %} {{ page_obj.number }} {% trans '页 总共' %} {{ page_obj.paginator.num_pages }} {% trans '页' %}</span>
                </li>

                {% if page_obj.has_next %}
                    <li>
                        <a href="?page={{ page_obj.next_page_number }}" aria-label="Next">&rsaquo;</a>
                    </li>
                    <li>
                        <a href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">&raquo;</a>
                    </li>
                {% endif %}
            </ul>
        </div>


        {#        弹出框#}
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">{% trans '请添加学生信息' %}</h4>
                    </div>
                    <div class="modal-body">
                        <form method="post" action="/index/studentadd/" novalidate>
                            {% csrf_token %}
                            {% for foo in form %}
                                <div class="col-xs-6">
                                    <span style="color: red">{{ foo.errors.0 }}</span>
                                    {{ foo.label }}: {{ foo }}
                                </div>
                            {% endfor %}
                            <div class="modal-footer">
                                <button style="margin-top: 20px" type="button" class="btn btn-default" data-dismiss="modal">{% trans '关 闭' %}</button>
                                <button style="margin-top: 20px" type="submit" class="btn btn-primary">{% trans '保存信息' %}</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block JS %}
    <script>
        function show_alert() {
            alert("success!");
        }
    </script>
    <script type="text/javascript">
        $(function () {
            AddEvent();
        })

        function AddEvent() {
            //找到id=btnAdd的元素，给他绑定一个点击事件
            $('#btnAdd').click(function () {
                //点击后找到id=myModal的元素，将其展示出来
                $('#myModal').modal('show')
            });
        }
    </script>
{% endblock %}